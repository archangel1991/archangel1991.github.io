<!DOCTYPE html>
<html>
<head>
	<title>Test</title>
</head>
<body>
<h1>Hello World</h1>
<p>I'm hosted with GitHub Pages.</p>
<div>
	<video id="video" referrerpolicy="no-referrer" class="botsflow-video" width="100%" height="auto" ${isIOS() ? "autoplay muted playsinline" : ""} controls disablePictureInPicture controlslist="nodownload noplaybackrate" autoplay="autoplay" muted="muted" preload="auto">
        <source referrerpolicy="no-referrer" src="https://editor.sextingo.com/media-stream?mediaUrl=https://drive.google.com/uc?id=1XZluXcswcTG1or9WMQ2VuZUCC8UulhkC&type=video#t=0.5" type="video/mp4">
    </video>
</div>
    <script>
		function isIOS() {
			let userAgentData = navigator?.userAgent;
			if(userAgentData == undefined) {
				alert("userAgentData is undefined!");
				return false;
			}
			return [
			  'iPad Simulator',
			  'iPhone Simulator',
			  'iPod Simulator',
			  'iPad',
			  'iPhone',
			  'iPod'
			].includes(userAgentData.platform)
			// iPad on iOS 13 detection
			|| (window.navigator?.userAgent?.includes("Mac") && "ontouchend" in document)
		}
		document.getElementById("video").addEventListener('loadedmetadata', (event) => {
                            alert("video is loadable");
                        });
                        document.getElementById("video").addEventListener('canplay', (event) => {
                            autoPlayVideo();
                            setTimeout(function() {
                                console.log("after timeout");
                            }, 0);
                        });
		
		document.getElementById("video").getElementsByTagName("source")[0].addEventListener('error', function(event) {
			alert("video error!");
			if(event) {
				alert(JSON.stringify(event));
			}
		})
		
		function autoPlayVideo() {
			let playPromise = document.getElementById("video").play();
			if (playPromise !== undefined) {
				playPromise.then(_ => {
				// Automatic playback started!
				alert("automatic playback started");
				}).catch(err => console.error(err));
			}
		}
		alert("Is IOS: " + isIOS());	
    </script>
</body>
</html>
